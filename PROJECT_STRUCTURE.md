# ๐ฆ ะะฐะถะฝะพ ะฟะพ ััััะบัััะต ะธ ะบัััะฐะผ ะฒะฐะปัั

- ะัะต ัะตัะฒะธัั ะธัะฟะพะปัะทััั ะพะฑัะธะน ัะฐะนะป `shared/currency_rates.json` (Docker volume)
- ะัััั ะฒะฐะปัั ัะพะปัะบะพ USD, EUR, GBP, JPY, CNY (RUB ะฝะต ะฟะพะดะดะตัะถะธะฒะฐะตััั)
- ะัััั ัะตะดะฐะบัะธัััััั ัะพะปัะบะพ ัะตัะตะท admin_bot (ะผะตะฝั "ะะทะผะตะฝะธัั ะบัััั ะฒะฐะปัั")
- ะะพัะปะต ะปัะฑะพะณะพ ะดะตะนััะฒะธั user_bot โ ะฐะฒัะพะพัะฒะตั ั ะฟัะตะดะปะพะถะตะฝะธะตะผ ะฝะฐะถะฐัั /start
- Parser ะฟะพะดะดะตัะถะธะฒะฐะตั proxy (HTTP_PROXY/HTTPS_PROXY), advanced headers, cookies, anti-bot ะพะฑัะพะด, headless-ะฑัะฐัะทะตั ะดะปั ัะปะพะถะฝัั ัะฐะนัะพะฒ

---
# ๐ ะะพะดัะพะฑะฝะฐั ััััะบัััะฐ ะฟัะพะตะบัะฐ

## ๐๏ธ ะะฑัะฐั ััััะบัััะฐ

```
AltBot/
โโโ ๐ .env                      # โ๏ธ ะะะะะะขะะะฃะะะซะ - ะะฐัะธ ัะตะบัะตัะฝัะต ัะพะบะตะฝั
โโโ ๐ .env.example              # ะัะธะผะตั ัะฐะนะปะฐ ั ัะพะบะตะฝะฐะผะธ
โโโ ๐ docker-compose.yml        # โ๏ธ ะะะะะะขะะะฃะะะซะ - ะะพะฝัะธะณััะฐัะธั Docker
โโโ ๐ Makefile                  # ะะฒัะพะผะฐัะธะทะฐัะธั ะดะปั Kubernetes
โโโ ๐ Makefile.ci               # CI/CD ะบะพะฝัะธะณััะฐัะธั
โโโ ๐ readme.md                 # ะัะฝะพะฒะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั
โโโ ๐ README_DOCKER.md          # ะะฝััััะบัะธั ะฟะพ Docker
โโโ ๐ QUICK_START_DOCKER.md     # ะัััััะน ััะฐัั
โโโ ๐ TROUBLESHOOTING.md        # ะะตัะตะฝะธะต ะฟัะพะฑะปะตะผ
โ
โโโ ๐ user_bot/                 # ะะพะปัะทะพะฒะฐัะตะปััะบะธะน ะฑะพั
โ   โโโ ๐ main.py              # โ๏ธ ะะะะะะขะะะฃะะะซะ - ะัะฝะพะฒะฝะพะน ะบะพะด ะฑะพัะฐ
โ   โโโ ๐ Dockerfile           # ะะฑัะฐะท Docker
โ   โโโ ๐ requirements.txt     # โ๏ธ ะะฐะฒะธัะธะผะพััะธ Python
โ   โโโ ๐ userbot-deployment.yaml  # Kubernetes ะบะพะฝัะธะณ
โ
โโโ ๐ admin_bot/               # ะะดะผะธะฝัะบะธะน ะฑะพั
โ   โโโ ๐ main.py              # โ๏ธ ะะะะะะขะะะฃะะะซะ - ะะพะด ะฐะดะผะธะฝ-ะฑะพัะฐ
โ   โโโ ๐ Dockerfile           # ะะฑัะฐะท Docker
โ   โโโ ๐ requirements.txt     # โ๏ธ ะะฐะฒะธัะธะผะพััะธ Python
โ   โโโ ๐ admin-deployment.yaml  # Kubernetes ะบะพะฝัะธะณ
โ
โโโ ๐ parser/                  # ะะฐััะตั ัะพะฒะฐัะพะฒ
โ   โโโ ๐ ProductParser.py     # โ๏ธ ะะะะะะขะะะฃะะะซะ - ะะพะณะธะบะฐ ะฟะฐััะธะฝะณะฐ
โ   โโโ ๐ parser_handler.py    # โ๏ธ ะะะะะะขะะะฃะะะซะ - FastAPI ัะตัะฒะตั
โ   โโโ ๐ UnitTest.py          # ๐งช ะขะะกะขะซ - ะัะพะฒะตัะบะฐ ะฟะฐััะตัะฐ
โ   โโโ ๐ Dockerfile           # ะะฑัะฐะท Docker
โ   โโโ ๐ Dockerfile-test      # ะะฑัะฐะท ะดะปั ัะตััะพะฒ
โ   โโโ ๐ runTestDocker.sh     # ะกะบัะธะฟั ะทะฐะฟััะบะฐ ัะตััะพะฒ
โ   โโโ ๐ requirements.txt     # โ๏ธ ะะฐะฒะธัะธะผะพััะธ Python
โ   โโโ ๐ parser.yaml          # Kubernetes ะบะพะฝัะธะณ
โ
โโโ ๐ postgres/                # ะะฐะทะฐ ะดะฐะฝะฝัั
    โโโ ๐ init.sql             # โ๏ธ ะะะะะะขะะะฃะะะซะ - ะกัััะบัััะฐ ะะ
    โโโ ๐ Dockerfile           # ะะฑัะฐะท Docker
    โโโ ๐ postgres-pv.yaml     # Kubernetes ััะฐะฝะธะปะธัะต
    โโโ ๐ postgres-sts.yaml    # Kubernetes StatefulSet
```

---

## โ๏ธ ะงะขะ ะะะะะ ะ ะะฃะะะ ะะะะะะขะะะะะะขะฌ

### ๐ **1. ะะพะฝัะธะณััะฐัะธั (.env)**
**ะคะฐะนะป:** `.env`

```env
USER_BOT_TOKEN=ะฒะฐั_ัะพะบะตะฝ_ัะทะตั_ะฑะพัะฐ
ADMIN_BOT_TOKEN=ะฒะฐั_ัะพะบะตะฝ_ะฐะดะผะธะฝ_ะฑะพัะฐ
ALLOWED_USER_IDS=873278697,123456789  # ะะพะถะฝะพ ะดะพะฑะฐะฒะธัั ะฝะตัะบะพะปัะบะพ ID ัะตัะตะท ะทะฐะฟัััั
```

**ะะพะณะดะฐ ัะตะดะฐะบัะธัะพะฒะฐัั:**
- ะกะผะตะฝะฐ ัะพะบะตะฝะพะฒ ะฑะพัะพะฒ
- ะะพะฑะฐะฒะปะตะฝะธะต ะฝะพะฒัั ะฐะดะผะธะฝะพะฒ
- ะะพัะปะต ัะตะดะฐะบัะธัะพะฒะฐะฝะธั: `docker compose restart`

---

### ๐ค **2. ะะพะปัะทะพะฒะฐัะตะปััะบะธะน ะฑะพั (user_bot/main.py)**

**ะงัะพ ะผะพะถะฝะพ ะธะทะผะตะฝะธัั:**

#### ๐ ะขะตะบัั ะบะฝะพะฟะพะบ ะผะตะฝั
```python
def get_main_menu():
    return ReplyKeyboardMarkup(
        keyboard=[
            [KeyboardButton("๐ ะัะพัะผะธัั ะทะฐะบะฐะท")],        # โ ะะตะฝัะนัะต ัะตะบัั
            [KeyboardButton("๐ FAQ"), KeyboardButton("๐ก ะัะพะฒะตัะตะฝะฝัะต ัะฐะนัั")],
            [KeyboardButton("๐ค ะะพะดะดะตัะถะบะฐ"), KeyboardButton("๐ข ะะฐะฝะฐะป"), KeyboardButton("๐ฌ ะัะทัะฒั")]
        ],
        resize_keyboard=True
    )
```

#### ๐ ะกััะปะบะธ ะฝะฐ ะฒะฐัะธ ัะตััััั
```python
elif text == "๐ FAQ":
    await update.message.reply_text("FAQ: https://rusale.shop/individual")  # โ ะะฐัะฐ ัััะปะบะฐ

elif text == "๐ค ะะพะดะดะตัะถะบะฐ":
    await update.message.reply_text("ะกะฒัะทะฐัััั ั ะฟะพะดะดะตัะถะบะพะน: https://t.me/rusalemngr")  # โ ะะฐั ะบะพะฝัะฐะบั

elif text == "๐ข ะะฐะฝะฐะป":
    await update.message.reply_text("ะะฐั ะบะฐะฝะฐะป:https://t.me/rusaleshop")  # โ ะะฐั ะบะฐะฝะฐะป
```

#### ๐ฑ ะัััั ะฒะฐะปัั ะธ ะบะพะผะธััะธั
```python
# ะะพะฝะฒะตััะฐัะธั ะฒะฐะปัั ั ััะตัะพะผ ะบะพะผะธััะธะธ
CURRENCY_RATES = {
    "$": 82, "USD": 82,      # โ ะะฑะฝะพะฒะปัะนัะต ะบัััั
    "โฌ": 90, "EUR": 90,
    "ยฃ": 115, "GBP": 115,
    "ยฅ": 0.6, "JPY": 0.6,
    "CNY": 12.5, "ๅ": 12.5
}

# ะะพะผะธััะธั
commission = max(amount * 0.15, 15)  # โ 15% ะธะปะธ ะผะธะฝะธะผัะผ 15 ััะฑ
```

#### ๐ง ะกะพะพะฑัะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั
```python
await update.message.reply_text(
    f"ะะฐะทะฒะฐะฝะธะต: {name}\n"
    f"ะกััะปะบะฐ: {text}\n"
    f"ะฆะตะฝะฐ: {price}\n"
    f"ะะปั ะพัะพัะผะปะตะฝะธั ะทะฐะบะฐะทะฐ ะธ ััะพัะฝะตะฝะธั ะดะตัะฐะปะตะน ะฟะตัะตัะปะธัะต ัะพะพะฑัะตะฝะธะต ะผะตะฝะตะดะถะตัั https://t.me/rusalemngr"
    # โ ะะตะฝัะนัะต ัะตะบัั ะบะฐะบ ัะพัะธัะต
)
```

**ะะพัะปะต ะธะทะผะตะฝะตะฝะธะน:**
```powershell
docker compose restart user_bot
```

---

### ๐จโ๐ผ **3. ะะดะผะธะฝัะบะธะน ะฑะพั (admin_bot/main.py)**

**ะงัะพ ะผะพะถะฝะพ ะธะทะผะตะฝะธัั:**

#### ๐ ะคะพัะผะฐั ะฒัะฒะพะดะฐ ััะฐัะธััะธะบะธ
```python
# ะ ััะฝะบัะธะธ count_handler
lines = ["๐ ะกัะฐัะธััะธะบะฐ ะฟะพ ะฟะพะปัะทะพะฒะฐัะตะปัะผ:\n"]  # โ ะะตะฝัะนัะต ะทะฐะณะพะปะพะฒะพะบ
for uid, orders in user_orders.items():
    count = len(orders)
    word = pluralize(count)
    lines.append(f"๐ค {uid} โ {count} {word}:")  # โ ะะตะฝัะนัะต ัะพัะผะฐั
```

#### ๐ ะขะตะบัั ัะพะพะฑัะตะฝะธะน ัะฐัััะปะบะธ
```python
# ะะพะถะฝะพ ะดะพะฑะฐะฒะธัั ะฟัะตะดัััะฐะฝะพะฒะปะตะฝะฝัะต ัะฐะฑะปะพะฝั
TEMPLATES = {
    "sale": "๐ฅ ะกะบะธะดะบะฐ 20% ะฝะฐ ะฒัะต ัะพะฒะฐัั!",
    "news": "๐ข ะะพะฒะพะต ะฟะพัััะฟะปะตะฝะธะต ัะพะฒะฐัะพะฒ!"
}
```

**ะะพัะปะต ะธะทะผะตะฝะตะฝะธะน:**
```powershell
docker compose restart admin_bot
```

---

### ๐ **4. ะะฐััะตั (parser/ProductParser.py)**

**ะงัะพ ะผะพะถะฝะพ ะธะทะผะตะฝะธัั:**

#### ๐ท๏ธ ะะพะฑะฐะฒะธัั ะฝะพะฒัะต ัะตะณะธ ะดะปั ะฟะพะธัะบะฐ ะฝะฐะทะฒะฐะฝะธั
```python
def parse_product_name(self):
    if self.soup:
        search_tags = ['h1', 'h2', 'h3', 'title', 'div', 'span']  # โ ะะพะฑะฐะฒะปัะนัะต ัะตะณะธ
        search_classes = ['product-title', 'product-name', 'name', 'title']  # โ ะะพะฑะฐะฒะปัะนัะต ะบะปะฐััั
```

#### ๐ฐ ะะพะฑะฐะฒะธัั ะฝะพะฒัะต ะฒะฐะปััั
```python
def parse_product_price(self):
    if self.soup:
        currency_symbols = r'[ยฃ$โฌยฅโนโฝ]'  # โ ะะพะฑะฐะฒััะต โฝ ะธะปะธ ะดััะณะธะต ะฒะฐะปััั
```

#### ๐ ะะพะฑะฐะฒะธัั ะฟะพะดะดะตัะถะบั ะฝะพะฒัั ัะฐะนัะพะฒ
ะัะปะธ ะฟะฐััะตั ะฝะต ัะฐะฑะพัะฐะตั ั ะบะฐะบะธะผ-ัะพ ัะฐะนัะพะผ, ะดะพะฑะฐะฒััะต ัะฟะตัะธะฐะปัะฝัั ะปะพะณะธะบั:

```python
def parse_product_name(self):
    # ะกะฟะตัะธะฐะปัะฝะฐั ะปะพะณะธะบะฐ ะดะปั ะบะพะฝะบัะตัะฝะพะณะพ ัะฐะนัะฐ
    if 'amazon.com' in self.url:
        product_name_tag = self.soup.find('span', id='productTitle')
        if product_name_tag:
            self.product_name = product_name_tag.get_text(strip=True)
            return
    
    # ะะฑัะฐั ะปะพะณะธะบะฐ ะดะปั ะพััะฐะปัะฝัั
    # ... ะพััะฐะปัะฝะพะน ะบะพะด
```

**ะะพัะปะต ะธะทะผะตะฝะตะฝะธะน:**
```powershell
docker compose restart parser
```

---

### ๐พ **5. ะะฐะทะฐ ะดะฐะฝะฝัั (postgres/init.sql)**

**ะขะตะบััะฐั ััััะบัััะฐ:**
```sql
CREATE TABLE IF NOT EXISTS parsed_data (
    id SERIAL PRIMARY KEY,
    content TEXT,           -- JSON ั ะดะฐะฝะฝัะผะธ ัะพะฒะฐัะฐ
    user_id TEXT,           -- Telegram ID ะฟะพะปัะทะพะฒะฐัะตะปั
    created_at TIMESTAMP DEFAULT NOW()
);
```

**ะงัะพ ะผะพะถะฝะพ ะดะพะฑะฐะฒะธัั:**

```sql
-- ะะพะฑะฐะฒะธัั ะธะฝะดะตะบัั ะดะปั ััะบะพัะตะฝะธั
CREATE INDEX idx_user_id ON parsed_data(user_id);
CREATE INDEX idx_created_at ON parsed_data(created_at);

-- ะะพะฑะฐะฒะธัั ัะฐะฑะปะธัั ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
CREATE TABLE IF NOT EXISTS users (
    id SERIAL PRIMARY KEY,
    telegram_id TEXT UNIQUE,
    username TEXT,
    first_name TEXT,
    registered_at TIMESTAMP DEFAULT NOW()
);

-- ะะพะฑะฐะฒะธัั ัะฐะฑะปะธัั ะดะปั ััะฐัะธััะธะบะธ
CREATE TABLE IF NOT EXISTS statistics (
    id SERIAL PRIMARY KEY,
    user_id TEXT,
    action TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);
```

**ะะพัะปะต ะธะทะผะตะฝะตะฝะธะน:**
```powershell
docker compose down -v  # ะฃะดะฐะปะธั ะดะฐะฝะฝัะต!
docker compose up -d    # ะะตัะตัะพะทะดะฐัั ะะ ั ะฝะพะฒะพะน ััััะบัััะพะน
```

---

## ๐๏ธ ะะะ ะะะกะะะขะะะขะฌ ะะะะฃ ะะะะะซะฅ

### **ะกะฟะพัะพะฑ 1: ะงะตัะตะท ะบะพะผะฐะฝะดะฝัั ัััะพะบั (psql)**

```powershell
# ะะพะดะบะปััะธัััั ะบ PostgreSQL ะฒะฝัััะธ ะบะพะฝัะตะนะฝะตัะฐ
docker compose exec postgres psql -U admin -d parserdb

# ะะฝัััะธ psql:
\dt                           # ะะพะบะฐะทะฐัั ะฒัะต ัะฐะฑะปะธัั
SELECT * FROM parsed_data;    # ะะพะบะฐะทะฐัั ะฒัะต ะทะฐะฟะธัะธ
SELECT COUNT(*) FROM parsed_data;  # ะะพะปะธัะตััะฒะพ ะทะฐะฟะธัะตะน
SELECT user_id, COUNT(*) FROM parsed_data GROUP BY user_id;  # ะกัะฐัะธััะธะบะฐ ะฟะพ ะฟะพะปัะทะพะฒะฐัะตะปัะผ

# ะัะนัะธ
\q
```

### **ะกะฟะพัะพะฑ 2: ะงะตัะตะท GUI (pgAdmin)**

1. **ะฃััะฐะฝะพะฒะธัะต pgAdmin:** https://www.pgadmin.org/download/
2. **ะกะพะทะดะฐะนัะต ะฟะพะดะบะปััะตะฝะธะต:**
   - Host: `localhost`
   - Port: `5432`
   - Database: `parserdb`
   - Username: `admin`
   - Password: `test123`
3. **ะัะพัะผะฐััะธะฒะฐะนัะต ะดะฐะฝะฝัะต** ัะตัะตะท ะณัะฐัะธัะตัะบะธะน ะธะฝัะตััะตะนั

### **ะกะฟะพัะพะฑ 3: ะงะตัะตะท VS Code ัะฐััะธัะตะฝะธะต**

1. **ะฃััะฐะฝะพะฒะธัะต ัะฐััะธัะตะฝะธะต:** `PostgreSQL` ะพั Chris Kolkman
2. **ะกะพะทะดะฐะนัะต ะฟะพะดะบะปััะตะฝะธะต:**
   ```
   Host: localhost
   Port: 5432
   Database: parserdb
   User: admin
   Password: test123
   ```
3. **ะัะฟะพะปะฝัะนัะต SQL ะทะฐะฟัะพัั** ะฟััะผะพ ะฒ VS Code

### **ะกะฟะพัะพะฑ 4: ะงะตัะตะท DBeaver (ะะตะบะพะผะตะฝะดัั!)**

1. **ะกะบะฐัะฐะนัะต:** https://dbeaver.io/download/
2. **ะะพะดะบะปััะธัะตัั** ั ัะตะผะธ ะถะต ะฟะฐัะฐะผะตััะฐะผะธ
3. **ะะธะทัะฐะปัะฝัะน ะธะฝัะตััะตะนั** ะดะปั ัะฐะฑะพัั ั ะะ

---

## ๐งช ะะะฏ ะงะะะ ะขะะกะขะะะซะ ะคะะะะซ

### **parser/UnitTest.py**

**ะะฐะทะฝะฐัะตะฝะธะต:** ะัะพะฒะตัะบะฐ ะฟัะฐะฒะธะปัะฝะพััะธ ัะฐะฑะพัั ะฟะฐััะตัะฐ

**ะงัะพ ัะตััะธััะตั:**
- โ ะัะฐะฒะธะปัะฝะพ ะปะธ ะฟะฐัััััั ะฝะฐะทะฒะฐะฝะธั ัะพะฒะฐัะพะฒ
- โ ะัะฐะฒะธะปัะฝะพ ะปะธ ะฟะฐัััััั ัะตะฝั
- โ ะะฑัะฐะฑะพัะบะฐ ัะฐะทะฝัั ะฒะฐะปัั (โฌ, $, ยฃ, ยฅ)
- โ ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ ัะตัะธ
- โ ะะฑัะฐะฑะพัะบะฐ ะฝะตะฒะฐะปะธะดะฝัั ะดะฐะฝะฝัั
- โ ะะฐััะธะฝะณ ัะตะฝ ั ัะฐะทะดะตะปะธัะตะปัะผะธ (1,234.56)

**ะะฐะบ ะทะฐะฟัััะธัั ัะตััั:**

```powershell
# ะะฐัะธะฐะฝั 1: ะะพะบะฐะปัะฝะพ
cd parser
pip install pytest
pytest UnitTest.py -v

# ะะฐัะธะฐะฝั 2: ะ Docker
docker compose exec parser pytest UnitTest.py -v

# ะะฐัะธะฐะฝั 3: ะงะตัะตะท ัะฟะตัะธะฐะปัะฝัะน Dockerfile
docker build -f parser/Dockerfile-test -t parser-test ./parser
docker run parser-test
```

**ะะฐัะตะผ ะฝัะถะฝั:**
- ะัะพะฒะตัะธัั, ััะพ ะฟะฐััะตั ัะฐะฑะพัะฐะตั ะฟะพัะปะต ะธะทะผะตะฝะตะฝะธะน
- ะฃะฑะตะดะธัััั, ััะพ ะฝะพะฒัะต ัะฐะนัั ะฟะฐัััััั ะฟัะฐะฒะธะปัะฝะพ
- ะะฒัะพะผะฐัะธัะตัะบะพะต ัะตััะธัะพะฒะฐะฝะธะต ะฒ CI/CD

**ะัะธะผะตั ัะตััะฐ:**
```python
def test_parse_product_price_with_comma_separator():
    parser = ProductParser("http://example.com")
    parser.soup = BeautifulSoup('<html><span>ยฃ1,234.56</span></html>', 'html.parser')
    parser.parse_product_price()
    
    assert parser.product_price == "ยฃ1,234.56"  # ะัะพะฒะตัะบะฐ ััะพ ัะตะฝะฐ ัะฐัะฟะฐััะธะปะฐัั ะฟัะฐะฒะธะปัะฝะพ
```

---

## ๐ ะขะะะะงะะซะ ะกะฆะะะะะะ ะะะะะะขะะะะะะะะฏ

### **ะกัะตะฝะฐัะธะน 1: ะะทะผะตะฝะธัั ัะตะบัั ะบะฝะพะฟะพะบ**
1. ะัะบัะพะนัะต `user_bot/main.py`
2. ะะฐะนะดะธัะต ััะฝะบัะธั `get_main_menu()`
3. ะะทะผะตะฝะธัะต ัะตะบัั ะบะฝะพะฟะพะบ
4. ะกะพััะฐะฝะธัะต ะธ ะฒัะฟะพะปะฝะธัะต: `docker compose restart user_bot`

### **ะกัะตะฝะฐัะธะน 2: ะะฑะฝะพะฒะธัั ะบัััั ะฒะฐะปัั**
1. ะัะบัะพะนัะต `user_bot/main.py`
2. ะะฐะนะดะธัะต `CURRENCY_RATES`
3. ะะฑะฝะพะฒะธัะต ะทะฝะฐัะตะฝะธั
4. ะกะพััะฐะฝะธัะต ะธ ะฒัะฟะพะปะฝะธัะต: `docker compose restart user_bot`

### **ะกัะตะฝะฐัะธะน 3: ะะพะฑะฐะฒะธัั ะฟะพะดะดะตัะถะบั ะฝะพะฒะพะณะพ ัะฐะนัะฐ**
1. ะัะบัะพะนัะต `parser/ProductParser.py`
2. ะะพะฑะฐะฒััะต ัะฟะตัะธะฐะปัะฝัั ะปะพะณะธะบั ะดะปั ัะฐะนัะฐ
3. ะะพะฑะฐะฒััะต ัะตัั ะฒ `parser/UnitTest.py`
4. ะะฐะฟัััะธัะต ัะตััั: `cd parser && pytest UnitTest.py`
5. ะัะปะธ OK, ะฒัะฟะพะปะฝะธัะต: `docker compose restart parser`

### **ะกัะตะฝะฐัะธะน 4: ะะพะฑะฐะฒะธัั ะฝะพะฒะพะณะพ ะฐะดะผะธะฝะฐ**
1. ะัะบัะพะนัะต `.env`
2. ะะพะฑะฐะฒััะต ID ัะตัะตะท ะทะฐะฟัััั: `ALLOWED_USER_IDS=873278697,123456789`
3. ะกะพััะฐะฝะธัะต ะธ ะฒัะฟะพะปะฝะธัะต: `docker compose restart admin_bot`

### **ะกัะตะฝะฐัะธะน 5: ะะทะผะตะฝะธัั ััััะบัััั ะะ**
1. ะัะบัะพะนัะต `postgres/init.sql`
2. ะะพะฑะฐะฒััะต ะฝะพะฒัะต ัะฐะฑะปะธัั/ะฟะพะปั
3. **ะะะะะ:** ะญัะพ ัะดะฐะปะธั ะฒัะต ะดะฐะฝะฝัะต!
4. ะัะฟะพะปะฝะธัะต:
   ```powershell
   docker compose down -v
   docker compose up -d
   ```

---

## ๐ซ ะงะขะ ะะ ะกะขะะะข ะขะะะะะขะฌ (ะตัะปะธ ะฝะต ัะฒะตัะตะฝั)

- โ `Dockerfile` - ะตัะปะธ ะฝะต ะทะฝะฐะตัะต Docker
- โ `*-deployment.yaml` - ะตัะปะธ ะฝะต ะธัะฟะพะปัะทัะตัะต Kubernetes
- โ `Makefile` - ะฐะฒัะพะผะฐัะธะทะฐัะธั ะดะปั K8s
- โ ะกัััะบัััะฐ ะะ ะฒ `init.sql` (ะผะพะถะฝะพ ะฟะพัะตัััั ะดะฐะฝะฝัะต)

---

## ๐ ะะะะะะะซะ ะะะะะะะซ

```powershell
# ะัะพัะผะพัั ะปะพะณะพะฒ
docker compose logs -f user_bot     # ะะพะณะธ ะฟะพะปัะทะพะฒะฐัะตะปััะบะพะณะพ ะฑะพัะฐ
docker compose logs -f admin_bot    # ะะพะณะธ ะฐะดะผะธะฝัะบะพะณะพ ะฑะพัะฐ
docker compose logs -f parser       # ะะพะณะธ ะฟะฐััะตัะฐ
docker compose logs -f postgres     # ะะพะณะธ ะะ

# ะะตัะตะทะฐะฟััะบ ะฟะพัะปะต ะธะทะผะตะฝะตะฝะธะน
docker compose restart user_bot     # ะะตัะตะทะฐะฟัััะธัั ะพะดะธะฝ ัะตัะฒะธั
docker compose restart              # ะะตัะตะทะฐะฟัััะธัั ะฒัั

# ะะตัะตัะฑะพัะบะฐ ะฟะพัะปะต ะธะทะผะตะฝะตะฝะธะน ะฒ ะบะพะดะต
docker compose up -d --build

# ะะพัะผะพััะตัั ะฑะฐะทั ะดะฐะฝะฝัั
docker compose exec postgres psql -U admin -d parserdb

# ะะฐะฟััะบ ัะตััะพะฒ
docker compose exec parser pytest UnitTest.py -v

# ะัะบะฐะฟ ะฑะฐะทั ะดะฐะฝะฝัั
docker compose exec postgres pg_dump -U admin parserdb > backup.sql

# ะะพัััะฐะฝะพะฒะปะตะฝะธะต ะธะท ะฑัะบะฐะฟะฐ
cat backup.sql | docker compose exec -T postgres psql -U admin -d parserdb
```

---

โ **ะขะตะฟะตัั ะฒั ะทะฝะฐะตัะต ััััะบัััั ะฟัะพะตะบัะฐ ะธ ััะพ ะณะดะต ะผะพะถะฝะพ ะผะตะฝััั!**
